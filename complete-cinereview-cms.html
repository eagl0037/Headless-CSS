<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineReview CMS - Admin Panel</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #e50914;
            --secondary-color: #221f1f;
            --dark-bg: #141414;
            --text-light: #ffffff;
            --text-muted: #b3b3b3;
            --sidebar-width: 250px;
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background-color: var(--secondary-color);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-brand {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }

        .sidebar-nav {
            padding: 1rem 0;
        }

        .nav-item {
            margin: 0.25rem 1rem;
        }

        .nav-link {
            color: var(--text-muted);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--text-light);
            background-color: rgba(229, 9, 20, 0.1);
            border-left: 3px solid var(--primary-color);
        }

        .nav-link i {
            margin-right: 0.75rem;
            width: 20px;
            text-align: center;
        }

        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            background-color: var(--dark-bg);
        }

        .header {
            background-color: var(--secondary-color);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 2rem;
        }

        .content {
            padding: 2rem;
        }

        .card {
            background-color: var(--secondary-color);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }

        .card-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background-color: transparent;
            color: var(--text-light);
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: #c40812;
            border-color: #c40812;
        }

        .form-control, .form-select {
            background-color: var(--dark-bg);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-light);
        }

        .form-control:focus, .form-select:focus {
            background-color: var(--dark-bg);
            border-color: var(--primary-color);
            color: var(--text-light);
            box-shadow: 0 0 0 0.2rem rgba(229, 9, 20, 0.25);
        }

        .table-dark {
            --bs-table-bg: var(--secondary-color);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .modal-content {
            background-color: var(--secondary-color);
            color: var(--text-light);
        }

        .modal-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-footer {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-close {
            filter: invert(1);
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary-color), #ff6b6b);
            border-radius: 12px;
            padding: 1.5rem;
            color: white;
            text-align: center;
            margin-bottom: 1rem;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .toast {
            background-color: var(--secondary-color);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .toast-success {
            border-left: 4px solid #28a745;
        }

        .toast-error {
            border-left: 4px solid #dc3545;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .spinner-border {
            border-color: var(--primary-color);
            border-right-color: transparent;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.show {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="#" class="sidebar-brand">
                <i class="fas fa-film me-2"></i>CineReview CMS
            </a>
        </div>
        <div class="sidebar-nav">
            <div class="nav-item">
                <a href="#" class="nav-link active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>Dashboard
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-page="movies">
                    <i class="fas fa-film"></i>Movies
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-page="add-movie">
                    <i class="fas fa-plus"></i>Add Movie
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" data-page="settings">
                    <i class="fas fa-cog"></i>Settings
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>Logout
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="header d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <button class="btn btn-link text-light d-md-none" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="h3 mb-0" id="pageTitle">Dashboard</h1>
            </div>
            <div class="d-flex align-items-center">
                <span class="me-3">Welcome, <strong id="userName">Admin</strong></span>
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        <i class="fas fa-user"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-dark">
                        <li><a class="dropdown-item" href="#" onclick="logout()">Logout</a></li>
                    </ul>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div class="content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="row">
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number" id="totalMoviesCount">0</div>
                            <div class="stat-label">Total Movies</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number" id="publishedMoviesCount">0</div>
                            <div class="stat-label">Published</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number" id="totalViewsCount">0</div>
                            <div class="stat-label">Total Views</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number" id="totalLikesCount">0</div>
                            <div class="stat-label">Total Likes</div>
                        </div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Recent Movies</h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-dark table-striped">
                                        <thead>
                                            <tr>
                                                <th>Title</th>
                                                <th>Genre</th>
                                                <th>Rating</th>
                                                <th>Status</th>
                                                <th>Views</th>
                                                <th>Published</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentMoviesTable">
                                            <!-- Recent movies will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Movies Page -->
            <div id="movies-page" class="page">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Manage Movies</h2>
                    <button class="btn btn-primary" onclick="showPage('add-movie')">
                        <i class="fas fa-plus me-2"></i>Add New Movie
                    </button>
                </div>

                <!-- Filters -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <input type="text" class="form-control" id="searchMovies" placeholder="Search movies...">
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" id="filterStatus">
                                    <option value="all">All Status</option>
                                    <option value="published">Published</option>
                                    <option value="draft">Draft</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-secondary" onclick="loadMovies()">
                                    <i class="fas fa-sync-alt me-2"></i>Refresh
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="loading" id="moviesLoading">
                    <div class="spinner-border" role="status"></div>
                    <p class="mt-2">Loading movies...</p>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-dark table-striped">
                                <thead>
                                    <tr>
                                        <th>Poster</th>
                                        <th>Title</th>
                                        <th>Genre</th>
                                        <th>Rating</th>
                                        <th>Year</th>
                                        <th>Status</th>
                                        <th>Views</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="moviesTable">
                                    <!-- Movies will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                        <nav id="moviesPagination" class="mt-3">
                            <!-- Pagination will be loaded here -->
                        </nav>
                    </div>
                </div>
            </div>

            <!-- Add/Edit Movie Page -->
            <div id="add-movie-page" class="page">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 id="movieFormTitle">Add New Movie</h2>
                    <button class="btn btn-secondary" onclick="showPage('movies')">
                        <i class="fas fa-arrow-left me-2"></i>Back to Movies
                    </button>
                </div>

                <form id="movieForm" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Movie Information</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="title" class="form-label">Title *</label>
                                        <input type="text" class="form-control" id="title" name="title" required>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="genre" class="form-label">Genre *</label>
                                                <select class="form-select" id="genre" name="genre" required>
                                                    <option value="">Select Genre</option>
                                                    <option value="Action">Action</option>
                                                    <option value="Drama">Drama</option>
                                                    <option value="Comedy">Comedy</option>
                                                    <option value="Sci-Fi">Sci-Fi</option>
                                                    <option value="Horror">Horror</option>
                                                    <option value="Romance">Romance</option>
                                                    <option value="Thriller">Thriller</option>
                                                    <option value="Documentary">Documentary</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-3">
                                                <label for="year" class="form-label">Year *</label>
                                                <input type="number" class="form-control" id="year" name="year" min="1900" max="2030" required>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-3">
                                                <label for="rating" class="form-label">Rating *</label>
                                                <input type="number" class="form-control" id="rating" name="rating" min="0" max="10" step="0.1" required>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="director" class="form-label">Director *</label>
                                                <input type="text" class="form-control" id="director" name="director" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="duration" class="form-label">Duration</label>
                                                <input type="text" class="form-control" id="duration" name="duration" placeholder="e.g., 120 min">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="description" class="form-label">Description *</label>
                                        <textarea class="form-control" id="description" name="description" rows="3" required></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="review" class="form-label">Review *</label>
                                        <textarea class="form-control" id="review" name="review" rows="8" required></textarea>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="reviewer" class="form-label">Reviewer *</label>
                                                <input type="text" class="form-control" id="reviewer" name="reviewer" required>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <label for="reviewerTitle" class="form-label">Reviewer Title</label>
                                                <input type="text" class="form-control" id="reviewerTitle" name="reviewerTitle" placeholder="e.g., Senior Film Critic">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="tags" class="form-label">Tags</label>
                                        <input type="text" class="form-control" id="tags" name="tags" placeholder="Enter tags separated by commas">
                                        <div class="form-text">Example: action, superhero, blockbuster</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Publishing</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="status" class="form-label">Status</label>
                                        <select class="form-select" id="status" name="status">
                                            <option value="draft">Draft</option>
                                            <option value="published">Published</option>
                                        </select>
                                    </div>

                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="featured" name="featured">
                                        <label class="form-check-label" for="featured">Featured Movie</label>
                                    </div>

                                    <div id="posterPreview" class="mb-3" style="display: none;">
                                        <img id="posterImage" class="img-fluid rounded" style="max-height: 200px;">
                                    </div>

                                    <div class="mb-3">
                                        <label for="posterUrl" class="form-label">Poster URL</label>
                                        <input type="url" class="form-control" id="posterUrl" name="poster" placeholder="https://example.com/poster.jpg">
                                    </div>
                                </div>
                            </div>

                            <div class="card mt-3">
                                <div class="card-header">
                                    <h5 class="mb-0">SEO</h5>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label for="metaDescription" class="form-label">Meta Description</label>
                                        <textarea class="form-control" id="metaDescription" name="metaDescription" rows="3" placeholder="SEO description for search engines"></textarea>
                                    </div>

                                    <div class="mb-3">
                                        <label for="metaKeywords" class="form-label">Meta Keywords</label>
                                        <input type="text" class="form-control" id="metaKeywords" name="metaKeywords" placeholder="keyword1, keyword2, keyword3">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Save Movie
                        </button>
                        <button type="button" class="btn btn-secondary ms-2" onclick="resetForm()">
                            <i class="fas fa-times me-2"></i>Cancel
                        </button>
                    </div>
                </form>
            </div>

            <!-- Settings Page -->
            <div id="settings-page" class="page">
                <h2 class="mb-4">Site Settings</h2>

                <form id="settingsForm">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">General Settings</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="siteName" class="form-label">Site Name</label>
                                <input type="text" class="form-control" id="siteName" name="siteName" value="CineReview">
                            </div>

                            <div class="mb-3">
                                <label for="siteDescription" class="form-label">Site Description</label>
                                <textarea class="form-control" id="siteDescription" name="siteDescription" rows="3">Your trusted source for movie reviews and ratings.</textarea>
                            </div>

                            <div class="mb-3">
                                <label for="contactEmail" class="form-label">Contact Email</label>
                                <input type="email" class="form-control" id="contactEmail" name="contactEmail" value="admin@cinereview.com">
                            </div>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-header">
                            <h5 class="mb-0">Social Media</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label for="twitter" class="form-label">Twitter Handle</label>
                                <input type="text" class="form-control" id="twitter" name="twitter" placeholder="@username">
                            </div>

                            <div class="mb-3">
                                <label for="facebook" class="form-label">Facebook Page</label>
                                <input type="text" class="form-control" id="facebook" name="facebook" placeholder="facebook-page-name">
                            </div>

                            <div class="mb-3">
                                <label for="instagram" class="form-label">Instagram Handle</label>
                                <input type="text" class="form-control" id="instagram" name="instagram" placeholder="@username">
                            </div>
                        </div>
                    </div>

                    <div class="mt-4">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Save Settings
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastContainer">
        <!-- Toasts will be added here -->
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-film me-2"></i>CineReview CMS Login
                    </h5>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="loginEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="loginEmail" value="admin@cinereview.com" required>
                        </div>
                        <div class="mb-3">
                            <label for="loginPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" value="password123" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-sign-in-alt me-2"></i>Login
                        </button>
                        <div class="mt-3 text-center">
                            <small class="text-muted">Demo credentials: admin@cinereview.com / password123</small>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Mock API Configuration - In production, this would be a real backend
        const API_BASE_URL = 'http://localhost:3000/api';
        let authToken = null;
        let currentPage = 1;
        let currentMovieId = null;

        // Mock Database
        let mockData = {
            users: [
                { id: 1, email: 'admin@cinereview.com', password: 'password123', name: 'Admin User' }
            ],
            movies: [
                {
                    id: 1,
                    title: 'The Matrix',
                    genre: 'Sci-Fi',
                    year: 1999,
                    rating: 8.7,
                    director: 'The Wachowskis',
                    duration: '136 min',
                    description: 'A computer programmer is led to fight an underground war against powerful computers.',
                    review: 'The Matrix revolutionized cinema with its groundbreaking visual effects and philosophical themes.',
                    reviewer: 'John Smith',
                    reviewerTitle: 'Senior Film Critic',
                    tags: 'sci-fi, action, philosophy',
                    status: 'published',
                    featured: true,
                    poster: 'https://via.placeholder.com/300x450/e50914/ffffff?text=The+Matrix',
                    views: 1250,
                    likes: 324,
                    metaDescription: 'Pulp Fiction review - Tarantino\'s groundbreaking crime drama.',
                    metaKeywords: 'pulp fiction, tarantino, john travolta, crime',
                    publishedAt: null,
                    createdAt: new Date('2024-02-10')
                }
            ],
            settings: {
                siteName: 'CineReview',
                siteDescription: 'Your trusted source for movie reviews and ratings.',
                contactEmail: 'admin@cinereview.com',
                twitter: '@cinereview',
                facebook: 'cinereview',
                instagram: '@cinereview'
            }
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            authToken = JSON.parse(sessionStorage.getItem('authToken') || 'null');
            if (authToken) {
                hideLogin();
                loadDashboard();
            } else {
                showLogin();
            }
            setupEventListeners();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Navigation
            document.querySelectorAll('[data-page]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    showPage(e.target.closest('[data-page]').dataset.page);
                });
            });

            // Forms
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('movieForm').addEventListener('submit', handleMovieSubmit);
            document.getElementById('settingsForm').addEventListener('submit', handleSettingsSubmit);

            // Search and filters
            const searchInput = document.getElementById('searchMovies');
            const filterStatus = document.getElementById('filterStatus');
            
            if (searchInput) {
                searchInput.addEventListener('input', debounce(loadMovies, 500));
            }
            if (filterStatus) {
                filterStatus.addEventListener('change', loadMovies);
            }

            // Poster URL preview
            const posterUrl = document.getElementById('posterUrl');
            if (posterUrl) {
                posterUrl.addEventListener('input', handlePosterPreview);
            }
        }

        // Authentication functions
        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Mock authentication
            const user = mockData.users.find(u => u.email === email && u.password === password);
            
            if (user) {
                authToken = { userId: user.id, token: 'mock-jwt-token', user: user };
                sessionStorage.setItem('authToken', JSON.stringify(authToken));
                document.getElementById('userName').textContent = user.name;
                hideLogin();
                loadDashboard();
                showToast('Login successful!', 'success');
            } else {
                showToast('Invalid credentials. Please try again.', 'error');
            }
        }

        function logout() {
            sessionStorage.removeItem('authToken');
            authToken = null;
            showLogin();
            showToast('Logged out successfully', 'success');
        }

        function showLogin() {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        }

        function hideLogin() {
            const loginModalEl = document.getElementById('loginModal');
            const loginModal = bootstrap.Modal.getInstance(loginModalEl);
            if (loginModal) {
                loginModal.hide();
            }
        }

        // Page navigation
        function showPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Show selected page
            const targetPage = document.getElementById(`${pageName}-page`);
            if (targetPage) {
                targetPage.classList.add('active');
            }

            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageName}"]`)?.classList.add('active');

            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'movies': 'Manage Movies',
                'add-movie': 'Add New Movie',
                'settings': 'Settings'
            };
            document.getElementById('pageTitle').textContent = titles[pageName] || 'Dashboard';

            // Reset form if going to add movie page
            if (pageName === 'add-movie') {
                resetForm();
            }

            // Load page data
            switch (pageName) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'movies':
                    loadMovies();
                    break;
                case 'settings':
                    loadSettings();
                    break;
            }
        }

        // Dashboard functions
        function loadDashboard() {
            const publishedMovies = mockData.movies.filter(m => m.status === 'published');
            const totalViews = mockData.movies.reduce((sum, m) => sum + (m.views || 0), 0);
            const totalLikes = mockData.movies.reduce((sum, m) => sum + (m.likes || 0), 0);

            updateDashboardStats({
                totalMovies: mockData.movies.length,
                publishedMovies: publishedMovies.length,
                totalViews: totalViews,
                totalLikes: totalLikes
            });

            updateRecentMovies(mockData.movies.slice(0, 5));
        }

        function updateDashboardStats(stats) {
            document.getElementById('totalMoviesCount').textContent = stats.totalMovies;
            document.getElementById('publishedMoviesCount').textContent = stats.publishedMovies;
            document.getElementById('totalViewsCount').textContent = stats.totalViews.toLocaleString();
            document.getElementById('totalLikesCount').textContent = stats.totalLikes.toLocaleString();
        }

        function updateRecentMovies(movies) {
            const tbody = document.getElementById('recentMoviesTable');
            tbody.innerHTML = movies.map(movie => `
                <tr>
                    <td><strong>${movie.title}</strong></td>
                    <td><span class="badge bg-secondary">${movie.genre}</span></td>
                    <td><span class="text-warning">${movie.rating}/10</span></td>
                    <td><span class="badge bg-${movie.status === 'published' ? 'success' : 'warning'}">${movie.status}</span></td>
                    <td>${movie.views || 0}</td>
                    <td>${movie.publishedAt ? new Date(movie.publishedAt).toLocaleDateString() : 'Not published'}</td>
                </tr>
            `).join('');
        }

        // Movies management functions
        function loadMovies() {
            const loading = document.getElementById('moviesLoading');
            const search = document.getElementById('searchMovies')?.value || '';
            const status = document.getElementById('filterStatus')?.value || 'all';

            if (loading) loading.style.display = 'block';

            // Filter movies
            let filteredMovies = mockData.movies;
            
            if (search) {
                filteredMovies = filteredMovies.filter(movie => 
                    movie.title.toLowerCase().includes(search.toLowerCase()) ||
                    movie.genre.toLowerCase().includes(search.toLowerCase()) ||
                    movie.director.toLowerCase().includes(search.toLowerCase())
                );
            }
            
            if (status !== 'all') {
                filteredMovies = filteredMovies.filter(movie => movie.status === status);
            }

            setTimeout(() => {
                updateMoviesTable(filteredMovies);
                if (loading) loading.style.display = 'none';
            }, 500);
        }

        function updateMoviesTable(movies) {
            const tbody = document.getElementById('moviesTable');
            tbody.innerHTML = movies.map(movie => `
                <tr>
                    <td>
                        <img src="${movie.poster}" alt="${movie.title}" style="width: 50px; height: 75px; object-fit: cover; border-radius: 4px;">
                    </td>
                    <td>
                        <strong>${movie.title}</strong><br>
                        <small class="text-muted">by ${movie.reviewer}</small>
                    </td>
                    <td><span class="badge bg-secondary">${movie.genre}</span></td>
                    <td><span class="text-warning">${movie.rating}/10</span></td>
                    <td>${movie.year}</td>
                    <td><span class="badge bg-${movie.status === 'published' ? 'success' : 'warning'}">${movie.status}</span></td>
                    <td>${movie.views || 0}</td>
                    <td>
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-info" onclick="editMovie(${movie.id})" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" onclick="deleteMovie(${movie.id})" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                            <button class="btn btn-outline-secondary" onclick="toggleMovieStatus(${movie.id})" title="Toggle Status">
                                <i class="fas fa-${movie.status === 'published' ? 'eye-slash' : 'eye'}"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Movie CRUD operations
        function editMovie(movieId) {
            const movie = mockData.movies.find(m => m.id === movieId);
            if (!movie) return;

            currentMovieId = movieId;
            
            // Populate form
            document.getElementById('title').value = movie.title;
            document.getElementById('genre').value = movie.genre;
            document.getElementById('year').value = movie.year;
            document.getElementById('rating').value = movie.rating;
            document.getElementById('director').value = movie.director;
            document.getElementById('duration').value = movie.duration;
            document.getElementById('description').value = movie.description;
            document.getElementById('review').value = movie.review;
            document.getElementById('reviewer').value = movie.reviewer;
            document.getElementById('reviewerTitle').value = movie.reviewerTitle;
            document.getElementById('tags').value = movie.tags;
            document.getElementById('status').value = movie.status;
            document.getElementById('featured').checked = movie.featured;
            document.getElementById('posterUrl').value = movie.poster;
            document.getElementById('metaDescription').value = movie.metaDescription;
            document.getElementById('metaKeywords').value = movie.metaKeywords;

            // Show poster preview
            if (movie.poster) {
                const preview = document.getElementById('posterPreview');
                const img = document.getElementById('posterImage');
                img.src = movie.poster;
                preview.style.display = 'block';
            }

            // Update form title
            document.getElementById('movieFormTitle').textContent = 'Edit Movie';
            
            showPage('add-movie');
        }

        function deleteMovie(movieId) {
            if (confirm('Are you sure you want to delete this movie? This action cannot be undone.')) {
                const index = mockData.movies.findIndex(m => m.id === movieId);
                if (index !== -1) {
                    mockData.movies.splice(index, 1);
                    loadMovies();
                    showToast('Movie deleted successfully', 'success');
                }
            }
        }

        function toggleMovieStatus(movieId) {
            const movie = mockData.movies.find(m => m.id === movieId);
            if (movie) {
                movie.status = movie.status === 'published' ? 'draft' : 'published';
                if (movie.status === 'published' && !movie.publishedAt) {
                    movie.publishedAt = new Date();
                }
                loadMovies();
                showToast(`Movie ${movie.status === 'published' ? 'published' : 'unpublished'} successfully`, 'success');
            }
        }

        async function handleMovieSubmit(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const movieData = {
                title: formData.get('title'),
                genre: formData.get('genre'),
                year: parseInt(formData.get('year')),
                rating: parseFloat(formData.get('rating')),
                director: formData.get('director'),
                duration: formData.get('duration'),
                description: formData.get('description'),
                review: formData.get('review'),
                reviewer: formData.get('reviewer'),
                reviewerTitle: formData.get('reviewerTitle'),
                tags: formData.get('tags'),
                status: formData.get('status'),
                featured: formData.has('featured'),
                poster: formData.get('poster') || 'https://via.placeholder.com/300x450/e50914/ffffff?text=' + encodeURIComponent(formData.get('title')),
                metaDescription: formData.get('metaDescription'),
                metaKeywords: formData.get('metaKeywords'),
                views: 0,
                likes: 0
            };

            if (currentMovieId) {
                // Update existing movie
                const movieIndex = mockData.movies.findIndex(m => m.id === currentMovieId);
                if (movieIndex !== -1) {
                    mockData.movies[movieIndex] = { ...mockData.movies[movieIndex], ...movieData };
                    if (movieData.status === 'published' && !mockData.movies[movieIndex].publishedAt) {
                        mockData.movies[movieIndex].publishedAt = new Date();
                    }
                }
                showToast('Movie updated successfully!', 'success');
            } else {
                // Create new movie
                movieData.id = Math.max(...mockData.movies.map(m => m.id)) + 1;
                movieData.createdAt = new Date();
                if (movieData.status === 'published') {
                    movieData.publishedAt = new Date();
                }
                mockData.movies.unshift(movieData);
                showToast('Movie created successfully!', 'success');
            }

            resetForm();
            showPage('movies');
        }

        function resetForm() {
            document.getElementById('movieForm').reset();
            currentMovieId = null;
            document.getElementById('movieFormTitle').textContent = 'Add New Movie';
            document.getElementById('posterPreview').style.display = 'none';
        }

        // Settings functions
        function loadSettings() {
            const settings = mockData.settings;
            document.getElementById('siteName').value = settings.siteName;
            document.getElementById('siteDescription').value = settings.siteDescription;
            document.getElementById('contactEmail').value = settings.contactEmail;
            document.getElementById('twitter').value = settings.twitter;
            document.getElementById('facebook').value = settings.facebook;
            document.getElementById('instagram').value = settings.instagram;
        }

        async function handleSettingsSubmit(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            mockData.settings = {
                siteName: formData.get('siteName'),
                siteDescription: formData.get('siteDescription'),
                contactEmail: formData.get('contactEmail'),
                twitter: formData.get('twitter'),
                facebook: formData.get('facebook'),
                instagram: formData.get('instagram')
            };

            showToast('Settings saved successfully!', 'success');
        }

        // Utility functions
        function handlePosterPreview() {
            const url = document.getElementById('posterUrl').value;
            const preview = document.getElementById('posterPreview');
            const img = document.getElementById('posterImage');

            if (url && isValidUrl(url)) {
                img.src = url;
                img.onload = () => {
                    preview.style.display = 'block';
                };
                img.onerror = () => {
                    preview.style.display = 'none';
                };
            } else {
                preview.style.display = 'none';
            }
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('show');
        }

        function showToast(message, type = 'success') {
            const toastContainer = document.getElementById('toastContainer');
            const toastId = 'toast_' + Date.now();
            
            const toast = document.createElement('div');
            toast.className = `toast toast-${type} show`;
            toast.id = toastId;
            toast.innerHTML = `
                <div class="toast-header">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} me-2"></i>
                    <strong class="me-auto">${type === 'success' ? 'Success' : 'Error'}</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
                </div>
                <div class="toast-body">${message}</div>
            `;

            toastContainer.appendChild(toast);

            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // REST API Implementation (Mock)
        const RestAPI = {
            // Authentication endpoints
            auth: {
                login: (credentials) => {
                    const user = mockData.users.find(u => 
                        u.email === credentials.email && u.password === credentials.password
                    );
                    if (user) {
                        return {
                            success: true,
                            data: {
                                token: 'mock-jwt-token-' + Date.now(),
                                user: { id: user.id, name: user.name, email: user.email }
                            }
                        };
                    }
                    return { success: false, error: 'Invalid credentials' };
                },

                verify: (token) => {
                    if (token && token.startsWith('mock-jwt-token')) {
                        return {
                            success: true,
                            data: { id: 1, name: 'Admin User', email: 'admin@cinereview.com' }
                        };
                    }
                    return { success: false, error: 'Invalid token' };
                }
            },

            // Movies endpoints
            movies: {
                getAll: (params = {}) => {
                    let movies = [...mockData.movies];
                    
                    if (params.search) {
                        movies = movies.filter(m => 
                            m.title.toLowerCase().includes(params.search.toLowerCase()) ||
                            m.genre.toLowerCase().includes(params.search.toLowerCase())
                        );
                    }
                    
                    if (params.status && params.status !== 'all') {
                        movies = movies.filter(m => m.status === params.status);
                    }
                    
                    return {
                        success: true,
                        data: movies,
                        pagination: {
                            total: movies.length,
                            page: params.page || 1,
                            limit: params.limit || 10,
                            pages: Math.ceil(movies.length / (params.limit || 10))
                        }
                    };
                },

                getById: (id) => {
                    const movie = mockData.movies.find(m => m.id === parseInt(id));
                    if (movie) {
                        return { success: true, data: movie };
                    }
                    return { success: false, error: 'Movie not found' };
                },

                create: (movieData) => {
                    const newMovie = {
                        ...movieData,
                        id: Math.max(...mockData.movies.map(m => m.id)) + 1,
                        createdAt: new Date(),
                        publishedAt: movieData.status === 'published' ? new Date() : null,
                        views: 0,
                        likes: 0
                    };
                    mockData.movies.unshift(newMovie);
                    return { success: true, data: newMovie };
                },

                update: (id, movieData) => {
                    const index = mockData.movies.findIndex(m => m.id === parseInt(id));
                    if (index !== -1) {
                        mockData.movies[index] = { ...mockData.movies[index], ...movieData };
                        if (movieData.status === 'published' && !mockData.movies[index].publishedAt) {
                            mockData.movies[index].publishedAt = new Date();
                        }
                        return { success: true, data: mockData.movies[index] };
                    }
                    return { success: false, error: 'Movie not found' };
                },

                delete: (id) => {
                    const index = mockData.movies.findIndex(m => m.id === parseInt(id));
                    if (index !== -1) {
                        const deletedMovie = mockData.movies.splice(index, 1)[0];
                        return { success: true, data: deletedMovie };
                    }
                    return { success: false, error: 'Movie not found' };
                }
            },

            // Admin endpoints
            admin: {
                getDashboard: () => {
                    const publishedMovies = mockData.movies.filter(m => m.status === 'published');
                    const totalViews = mockData.movies.reduce((sum, m) => sum + (m.views || 0), 0);
                    const totalLikes = mockData.movies.reduce((sum, m) => sum + (m.likes || 0), 0);

                    return {
                        success: true,
                        data: {
                            totalMovies: mockData.movies.length,
                            publishedMovies: publishedMovies.length,
                            totalViews: totalViews,
                            totalLikes: totalLikes,
                            recentMovies: mockData.movies.slice(0, 5)
                        }
                    };
                }
            },

            // Settings endpoints
            settings: {
                get: () => {
                    return { success: true, data: mockData.settings };
                },

                update: (settingsData) => {
                    mockData.settings = { ...mockData.settings, ...settingsData };
                    return { success: true, data: mockData.settings };
                }
            }
        };

        // Public API endpoints for frontend consumption
        const PublicAPI = {
            movies: {
                getFeatured: () => {
                    const featured = mockData.movies
                        .filter(m => m.status === 'published' && m.featured)
                        .slice(0, 6);
                    return { success: true, data: featured };
                },

                getLatest: (limit = 10) => {
                    const latest = mockData.movies
                        .filter(m => m.status === 'published')
                        .sort((a, b) => new Date(b.publishedAt) - new Date(a.publishedAt))
                        .slice(0, limit);
                    return { success: true, data: latest };
                },

                getByGenre: (genre) => {
                    const movies = mockData.movies
                        .filter(m => m.status === 'published' && m.genre.toLowerCase() === genre.toLowerCase());
                    return { success: true, data: movies };
                },

                search: (query) => {
                    const movies = mockData.movies
                        .filter(m => m.status === 'published' && 
                            (m.title.toLowerCase().includes(query.toLowerCase()) ||
                             m.genre.toLowerCase().includes(query.toLowerCase()) ||
                             m.director.toLowerCase().includes(query.toLowerCase()) ||
                             m.tags.toLowerCase().includes(query.toLowerCase())));
                    return { success: true, data: movies };
                }
            }
        };

        // Export APIs for use in other contexts
        window.RestAPI = RestAPI;
        window.PublicAPI = PublicAPI;
        window.mockData = mockData;

        console.log('🎬 CineReview CMS loaded successfully!');
        console.log('📊 Available APIs:', { RestAPI, PublicAPI });
        console.log('🎯 Demo Login: admin@cinereview.com / password123');
    </script>
</body>
</html>Read our review of The Matrix, the groundbreaking sci-fi film.',
                    metaKeywords: 'matrix, sci-fi, wachowski, keanu reeves',
                    publishedAt: new Date('2024-01-15'),
                    createdAt: new Date('2024-01-10')
                },
                {
                    id: 2,
                    title: 'Inception',
                    genre: 'Thriller',
                    year: 2010,
                    rating: 8.8,
                    director: 'Christopher Nolan',
                    duration: '148 min',
                    description: 'A thief who steals corporate secrets through dream-sharing technology.',
                    review: 'Nolan delivers a mind-bending thriller that challenges perception and reality.',
                    reviewer: 'Jane Doe',
                    reviewerTitle: 'Chief Film Critic',
                    tags: 'thriller, drama, nolan',
                    status: 'published',
                    featured: false,
                    poster: 'https://via.placeholder.com/300x450/e50914/ffffff?text=Inception',
                    views: 2100,
                    likes: 567,
                    metaDescription: 'Inception movie review - Christopher Nolan\'s masterpiece.',
                    metaKeywords: 'inception, nolan, leonardo dicaprio, thriller',
                    publishedAt: new Date('2024-02-01'),
                    createdAt: new Date('2024-01-28')
                },
                {
                    id: 3,
                    title: 'Pulp Fiction',
                    genre: 'Drama',
                    year: 1994,
                    rating: 8.9,
                    director: 'Quentin Tarantino',
                    duration: '154 min',
                    description: 'The lives of two mob hitmen, a boxer, and others intertwine in four tales of violence.',
                    review: 'Tarantino\'s masterpiece redefined storytelling with its non-linear narrative.',
                    reviewer: 'Mike Wilson',
                    reviewerTitle: 'Film Critic',
                    tags: 'drama, crime, tarantino',
                    status: 'draft',
                    featured: false,
                    poster: 'https://via.placeholder.com/300x450/e50914/ffffff?text=Pulp+Fiction',
                    views: 890,
                    likes: 234,
                    metaDescription: '